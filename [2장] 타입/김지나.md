
## 2장 타입
### 2.1 타입이란 
#### 1. 자료형으로서의 타입
최신 ECMAScript표준을 따르는 자바스크립트는 다음과 같은 7가지 데이터 타입(자료형)을 정의한다. 
- undefined
- null
- Boolean
- String
- Symbol
- Numeric(Number와 BigInt)
- Object

이와 같은 데이터 타입은 여러 종류의 데이터를 식별하는 분류 체계로 컴파일러에 값의 형태를 알려준다. 메모리에 저장된 값을 데이터 타입으로 설명할 수 있으며 모든 데이터를 해석할 때 데이터 타입 체계가 사용된다. 
-> 타입을 사용해서 값의 종류를 명시할 수 있고 메모리를 더욱 효율적으로 사용할 수 있다.


#### 2. 집합으로서의 타입
타입스크립트의 모든 타입은 집합으로써 서로 포함되고 포함되는 관계를 갖는다. 

- 다른 타임을 포함하는 타입은 `슈퍼 타입(부모 타입)` 
- 반대는 `서브 타입 (자식 타입)`

<img width="732" height="252" alt="Image" src="https://github.com/user-attachments/assets/5b1f39a8-e0db-4ace-aa64-f8ee921e9314" />
출처 - 한입 크기로 잘라먹는 타입스크립트

모든 타입은 unknown 타입으로 업캐스트 할 수 있지만 unknown 타입은 any를 제외한 어떤 타입에도 다운캐스팅이 불가능하다. 

#### 3. 정적 타입과 동적 타입
타입을 결정하는 시멎에 따라 타입을 `정적 타입`과 `동적타입`으로 분류할 수 있다.
정적 타입 시스템에서는 모든 변수의 타입이 컴파일타임에 결정된다. (컴파일 단계에서 타입 에러를 발견할 수 있음)
동적 타입시스켐에서는 변수 타입이 런타임에서 결정된다. (타입이 실행시점에 바뀌어버리면 예상치 못한 오류를 반환할 수 있어 위험하다)

#### 4. 강타입과 약타입
개발자가 의도적으로 타입을 명시하거나 바꾸지 않았는데도 컴파일러 또는 엔진에 의해 런타임에 타입이 자동으로 변경되는 것을 `암묵적 타입 변환` 이라고 한다. 
`강타입` 특징을 가진 언어에서는 서로 다른 타입을 갖는 값끼리 연산을 시도하면 컴파일러 또는 인터프리터에서 에러가 발생한다. 
`약타입` 에서는 서로 다른 타입을 갖는 값끼리 연산할 때는 컴파일러 또는 인터프리터가 내부적으로 판단해서 특정 값의 타입을 변환하여 연산을 수행한 후 값을 도출한다.

암묵적 변환은 개발자가 명시적으로 타입을 변환하지 않아도 다른 데이터 타입끼리 연산을 진행할 수 있는 편리함을 제공하지만, 작성자의 의도와 다르게 동작할 수 있으므로 사이드 이펙트의 가능성이 높아진다.

타입 검사기가 프로그램에 타입을 할당하는 데 사용하는 규칙 집합을 `타입 시스템`이라고 한다. 
타입시스템은 크게 2가지로 구분하는데 1) 어떤 타입을 사용하는지 컴파일러에 명시적으로 알려줘야하는 시스템 2) 자동으로 타입을 추론하는 시스템
타입스크립트는 두 시스템 모두에 영향을 받았다. 

#### 5. 컴파일 방식
컴파일 - 코드를 컴퓨터가 이해할 수 있도록 기계어로 변환하는 과정
하지만 타입스크립트는 자바스크립트의 슈퍼셋이기 때문에 어쨌든 실행하려면 자바스크립트로 변환되어야 한다. 
타입스크립트 컴파일러 -> 기계어로 변환과정이 아닌 ts-js로 변환 과정
ex. tsx 로 ts 실행하면 js파일이 생성

### 2.2 타입스크립트의 타입 시스템
#### 1. 타입 애너테이션 방식
`타입 애너테이션`이란 변수나 상수 혹은 함수의 인자와 반환 값에 타입을 명시적으로 선언해서 어떤 타입 값이 저장될 것인지를 컴파일러에 직접 알려주는 문법

```
// ts에서는 변수 이름 뒤에 :type 구문을 붙여 데이터 타입을 명시
let isDone: boolean = false;
let decimal: number = 6;
```

#### 2. 구조적 타이핑

```
// java (명시적)
class User {
    public String name;
}

class Admin {
    public String name;
}

void greet(User user) {
    System.out.println("Hello " + user.name);
}

Admin admin = new Admin();
greet(admin); // 컴파일 에러
```

```
// ts(구조적)
type User = { name: string };
type Admin = { name: string };

function greet(user: User) {
  console.log("Hi", user.name);
}

const admin: Admin = { name: "Jina" };
greet(admin); // 구조가 같아서 허용됨
```
이름으로 타입을 구분하는 `명목적인 타입 언어`의 특징과 달리 타입스크립트는 구조로 타입을 구분한다.

#### 3. 구조적 서브 타이핑
구조적 타입시스템을 따를 때는 집합을 확인한다. 
구조적 서브타이핑이란 객체가 가지고 있는 속성을 바탕으로 타입을 구분하는 것이다. 이름이 다른 객체라도 가진 속성이 동일하다면 타입스크립트는 서로 호환이 가능한 동일한 타입으로 여긴다. 


명목적 타이핑은 타입의 동일성을 확이하는 과정에서 구조적 타이핑에 비해 조금 더 안전하다. 하지만 타입스크립트가 구조적 타이핑을 채택한 이유는 자바스크립트를 모델링한 언어이기 때문.

자바스크립트는 본질적으로 `덕타이핑` 을 기반으로 한다.
|덕타이핑: 어떤 함수의 매개변숫값이 올바르게 주어진다면 그 값이 어떻게 만들어졌는지 신경 쓰지 않고 사용한다는 개념

덕 타이핑은 객체 자신의 타입보다, 객체의 변수 및 메소드의 집합이 객체 타입을 결정하게 된다. -> 구조를 기준으로 타입을 따진다.


덕 타이핑과 구조적 타이핑의 차이는 타입을 검사하는 시점
덕 타이핑 - 런타임에 결정 (자바스크립트)
구조적 타이핑- 컴파일타임에 타입체커가 검사(타입스크립트)


#### 5. 구조적 타이핑의 결과


#### 6. 타입스크립트의 점진적 타입 확인
점진적 타입 검사란 컴파일 타임에 타입을 검사하면서 필요에 따라 타입 선언 생략을 허용하는 방식을 뜻한다. 
타입 선언이 생략되면 동적으로 검사를 수행하는데 암시적 타입 변환이 일어난다. 

