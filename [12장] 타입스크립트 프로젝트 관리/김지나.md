## 12장 타입스크립트 프로젝트 관리 
### 12.1 앰비언트 타입 활용하기
`.d.ts` 확장자를 가진 파일에서는 타입 선언만 할 수 있으며 값을 표현할 수는 없다. 값을 포함하는 일반적인 선언과 구별하기 위해 `.d.ts` 확장자를 가진 파일에서 하는 타입 선언을 앰비언트 타입 선언이라고 한다. 
앰비언트 타입선언으로 값을 정의할 수는 없지만 declare라는 키워드를 사용하여 어딘가에 자바스크립트 값이 존재한다는 사실을 선언할 수 있다. 
> declare는 타입스크립트 컴파일러에 어떤 것의 존재 여부를 명시해주는 역할을 한다. 단순히 존재 여부만 알려주기 때문에 컴파일 대상이 아니다. 

##### 대표적인 앰비언트 타입 선언 활용 사례 
- 타입스크립트는 기본적으로 .ts, .js 파일만 이해하며 그 외의 다른 파일 형식은 인식하지 못한다. 따라서 알지 못하는 파일 형식을 모듈로 가져오려면 에러가 발생하여 이런 상황에서 타입스크립트의 declare키워드를 사용하여 특정 형식을 모듈로 선언할 수 있다. 

```
declare module "*.png" {
    const src: string;
    export default src;
}
```

##### 자바스크립트로 작성된 라이브러리
자바스크립트로 구현된 라이브러리는 타입 선언이 존재하지 않는다. 그러므로 임포트한 모듈은 모두 `any`로 추론될 것이다. 만약 tsconfig.json에서 any를 사용하지 못하게 설정했다면 프로젝트가 빌드되지 않을 것이다.
-> 이때 앰비언트 타입 선언을 사용할 수 있다. 
    ex) `@types/react`를 설치하면 `node_modules/@types/react`에 `index.d.ts`와 `global.d.ts`가 설치된다.
** tsc는 별도의 설정없이 node_modules/@types 디렉터리에 있는 타입 선언을 타입 검사에 활용한다.

>즉, 앰비언트 타입 선언은 타입스크립트에게 자바스크립트 코드 안에는 이러한 정보들이 있다 라 알려주는 도구

##### 타입스크립트로 작성된 라이브러리
타입스크립트로 작성된 라이브러리일지라도 자바스크립트 파일과 .d.ts 파일로 배포되는 것이 일반적이다. 
타입스크립트 파일을 직접 배포하여 라이브러리 사용자가 타입스크립트를 컴파일할 때 라이브러리 코드도 함께 컴파일하게 할 수도 있다.하지만 자바스크립트 파일과 .d.ts파일로 배포하면 라이브러리 코드를 따로 컴파일 하지 않다오 되기때문에 컴파일 시간이 크게 줄어든다. 또한 .d.ts파일이 있기 떄문에 .d.ts 파일에 정의된 타입 정보를 활용하여 라이브러리를 사용할 수 있다. 
tsconfig.json파일의 declaration을 true로 설정하면 타입스크립트 컴파일러는 자동으로 .d.ts파일을 생성한다. 

#### 12.1.2 앰비언트 타입 선언 시 주의점
1. 타입스크립트로 만드는 라이브러리에는 불필요 (자동으로 d.ts 생성해주는 옵션이 있음)
2. 서로 다른 라이브러리에서 동일한 이름의 앰비언트 타입 선언을 한다면 충돌이 발생할 수도 있다.

#### 12.1.3 앰비언트 타입 선언을 잘못 사용했을 때의 문제점
.ts 파일 내부에 앰비언트 변수를 선언할 대 앰비언트 타입의 의존성 관계가 보이지 않기 때문에 변경에 의한 영향 범위를 파악하기 어렵다. 왜냐하면 앰비언트 타입은 명시적인 임포트나 익스포트 없이 코드 전역에서 사용할 수 있기 때문이다.
.d.ts 확장자 파일 내에서 앰비언트 타입 선언을 하는 것은 일종의 개발자 간의 약속이다. -> 타입 선언 위치가 명확해야 가독성이 높아지고 유지보수도 편하게 할 수있음

#### 12.1.4 앰비언트 타입 활용하기 
1. 타입을 정의하여 임포트 없이 전역으로 공유 (내장 유틸리티 함수 사용처럼)
2. declare type 활용하기 (ex. Nullable 타입 선언하여 전역으로 사용)
3. declare module 활용하기 (ex. style component theme)
4. declare namespace 활용하기 (ex. env 설정값 가져오기, 변수 타입 지정하기 as 안써도 됨)
5. declare global 활용하기 (ex. 전역변수 객체 스코프에서 사용되는 모듈이나 변수 추가 가능)

#### 12.1.5 declare와 번들러의 시너지
declare global로 전역 변수를 선언하는 과정과 번들러를 통해 데이터를 주입하는 절차를 함께 활용하면 시너지를 낼 수 있다.


### 12.2. 스크립트와 설정 파일 활용하기
#### 12.2.1 스크립트 활용하기
##### 실시간으로 타입을 검사하자

```
yarn tsc -noEmit -incremental -w
```
- noEmit 옵션은 자바스크립트로 된 출력 파일을 생성하지 않도록 설정한 것
- incremental 옵션은 증분 컴파일을 활성화하여 컴파일 시간을 단축할 수 있게 한 것
- w는 파일 변경 사항을 모니터링한다는 의미

##### 타입 커버리지 확인하기
```
npx type-converage -detail
```
이 스크립트를 사용하면 현재 프로젝트의 타입 커버리지와 any를 사용하고 있는 변수의 위치가 나타난다. 


#### 12.2.2 설정 파일 활용하기
타입스크립트 컴파일 속도 높이기
tsconfig의 incremental 속성을 활용하여 타입스크립트의 컴파일 속도를 높일 수 있다. 
true로 설정하면 증분 컴파일이 활성화 되어 매번 모든 대상을 컴파일 하는 것이 아닌 변경된 부분만 컴파일 하게 된다.
